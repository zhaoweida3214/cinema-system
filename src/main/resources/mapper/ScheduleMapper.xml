<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.example.cinemaseat.mapper.ScheduleMapper">

    <select id="selectByCinemaAndDate" parameterType="map" resultType="org.example.cinemaseat.pojo.VO.ScheduleVO">
        SELECT s.id, s.movie_id AS movieId, m.title AS movieTitle,
               s.hall_id AS hallId, h.name AS hallName,
               s.start_time AS startTime, s.end_time AS endTime
        FROM schedule s
                 JOIN movie m ON s.movie_id = m.id
                 JOIN hall h ON s.hall_id = h.id
        WHERE s.cinema_id = #{cinemaId}
          AND DATE(s.start_time) = #{date}
        ORDER BY s.start_time
    </select>

</mapper>